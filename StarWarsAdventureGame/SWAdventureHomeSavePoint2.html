<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Star Wars Adventure Game</title>
    <style>
        button {
            cursor: pointer;
        }

        img {
            width: 680px;
            height: 420px;
            background-color: aliceblue; 
        }

        section {
            width: 690px;
            margin: 20px auto 20px auto;
        }
        h1 {
            text-align: center;
        }





    </style>

</head>
<body>
    <section>
        <!-- Display input and output-->
        <h1>Star Wars World Adventure Game</h1>
        <img src="" />
        <p id="output"></p>
        <p id="gameMessage"></p>
        <input id="input" type="text" placeholder="What would you like to do next?" />

        <br />
        <!-- display buttons -->
        <button id="btnGo">Go</button>
        <button id="btnSave">Save Game</button>
        <button id="btnShowRelics">Show Inventory</button>
        <p id="inventory"></p>
    </section>


    <script>
        // Creat world map Array
        // Arrays
        var map = []; // Array of locations in the game (the map)
            map[0] = "MontainLake";
            map[1] = "Village Pub";
            map[2] = "Village Residence";
            map[3] = "Village Gate";
            map[4] = "Village Square";
            map[5] = "Village park";
            map[6] = "Landing Port";
            map[7] = "Power Reactor";
            map[8] = "Military Base";

        // what directions can the player go
        var actionsIKnow = ["north", "east", "south", "west", "take", "drop", "use", "trade"];  

        // array to hold players items
        var backPack = [];  // Conainer for relics picked up along the way


        // array of relics found throughout the game
        var relics = []; 
            relics[0] = "1 Portion of Mana"; // may be used for engergy (+10). Can get this each time you go to the pub.
            relics[1] = "Scroll"; // will tell the player about the Light Saber and how to get it.
            relics[2] = "Key"; // will open a lock box at the military base
            relics[3] = "Light Saber"; // the final objective of the game is to get the Light Saber
            relics[4] = "Katana"; // standard issue defense wepon. Player will start with this
            relics[5] = "Figet Spinner";  // player will start with this. trade this with the Jawa to get the key           

       var relicLocations = [1,2,4,8];
            
        // array of location images
        var images = [];
            images[0] = "outerRealm1.jpg";
            images[1] = "14-Pub.jpg";
            images[2] = "23-Residence.jpg";
            images[3] = "5-Gate-inside.jpg";
            images[4] = "11-VillageSquare.jpg";
            images[5] = "park.jpg";
            images[6] = "outerRealm.jpg";
            images[7] = "22-PowerReactor.jpg";
            images[8] = "16-MilitaryBase.jpg";

        var blockedPathMessages = [];
            blockedPathMessages[0] = "The river is too deep to cross.";
            blockedPathMessages[1] = "You've had too much to drink to go that way";
            blockedPathMessages[2] = "A great wall surronding the grounds blocks your way.";
            blockedPathMessages[3] = "The gate is locked.";
            blockedPathMessages[4] = "";
            blockedPathMessages[5] = "The trees are too thick to pass.";
            blockedPathMessages[6] = "You cannot survive the wastelands";
            blockedPathMessages[7] = "A tar pit blocks your path.";
            blockedPathMessages[8] = "Storm Troopers are blocking your way.";

        // Other variables
        var mapLocation = 4; // Location where the player will start
        var playerInput = ""; // variable to hold players input
        var gameMessage = ""; // variable to hold the game output text (message)
        var action = ""; // variable to hold the current value of "actonsIKnow" array
        var relic = ""; // variable to hold the current value of "relic" array


        // input output variables
        var output = document.querySelector("#output"); // Output Element
        var input = document.querySelector("#input");   // Input Element
        var image = document.querySelector("img");

        // Create the action buttons
        var btnGo = document.querySelector("#btnGo");
        btnGo.addEventListener("click", clickGo, false);

        var btnSave = document.querySelector("#btnSave");
        btnSave.addEventListener("click", clickSave, false);

        var btnShowRelics = document.querySelector("#btnShowRelics");
        btnShowRelics.addEventListener("click", clickRelics, false)

        // Display players location
        render();

        function clickGo()  // Create something the click handler event can grab on to (click handler name here is "clickGo"")
        {
            playGame();  // execute this function when the button "btnGo" is clicked
        }

        function playGame()
        {
            // convert input to lower case so it matches the "actionsIKnow" array case
            playerInput = input.value;
            playerInput = playerInput.toLowerCase();

            // reset these variables from the previous turn

            gameMessage = "";
            action = "";

            for (var i = 0; i < actionsIKnow.length; i++)   // user has 4 choices for actions (north, south, east, or west)
            {
                if (playerInput.indexOf(actionsIKnow[i]) !== -1)   // checks to see if the index is greater than 0 (the first number in the array)
                {
                    action = actionsIKnow[i];  // assign the index of "actionsIKnow" to the variable "action" to return the results to the user
                    gameMessage.innerHTML = ("You chose to move " + action);
                    break; // breaks out of the loop as soon as the function returns true
                }
            }

            // choose the correct action to take (which direction do you move)
            switch (action)
            {
                case "north":
                    if (mapLocation >= 3)
                    {
                        mapLocation -= 3;
                    }
                    else {
                        gameMessage = blockedPathMessages[mapLocation];
                    }
                    break;
                case "east":
                    if (mapLocation % 3 !=2) {
                        mapLocation += 1;
                    }
                    else {
                        gameMessage = blockedPathMessages[mapLocation];
                    }
                    break;
                case "south":
                    if (mapLocation < 6) {
                        mapLocation += 3;
                    }
                    else {
                        gameMessage = blockedPathMessages[mapLocation]
                    }
                    break;
                case "west":
                    if (mapLocation % 3 !=0 ) {
                        mapLocation -= 1;
                    }
                    else {
                        gameMessage = blockedPathMessages[mapLocation];
                    }
                    break;    
                default: gameMessage = "You can't go that way."
            }

            // render the game
            render();
        }
        function render()
        {
            // display the new location informaiton to the player
            output.innerHTML = map[mapLocation];

            // See if there is a relic in that location
            for (var i = 0; i < relics.length; i++) {

                // Check to see if thre is an item here
                if (mapLocation === relicLocations[i]) {
                    // Display the message
                    output.innerHTML
                        += "<br>You see a <strong>"
                        + relics[i]
                        + "</strong> here."
                }
            }

            // display the game message
            output.innerHTML += "<br><em>" + gameMessage + "</em>";

            // display player inventory
            if (backPack.length != 0) {
                inventory.innerHTML += "<br>You are carrying: " + backPack.join(", ");
            }

            image.src = "../img/" + images[mapLocation];
        }
        

        function clickSave()
        {

        }

        function clickRelics()
        {

        }

        //
        output.innerHTML = map[mapLocation]; // Display the location of the player to the player


    </script>

</body>
</html>